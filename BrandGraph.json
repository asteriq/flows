[{"id":"360b06e8.6c4c0853","type":"create","z":"a5e0bedc.d77027d7","name":"Query Playbook","host":"https://vora-playbooks-tdx26.app.quantiply.com","notebookName":"Vora TimeSeries","userComments":[],"x":177,"y":300,"edges":[["91c0a30e.69a5a181"]]},{"id":"444590d2.3005df97","type":"sh","z":"a5e0bedc.d77027d7","name":"Get Data and Load into HDFS","content":"wget https://quantiply.com/brandgraphv3.jsg\nhadoop fs -put brandgraphv3.jsg\nhadoop fs -ls","userComments":[],"x":427,"y":175,"edges":[["d13e1f82.a7e09a87"]]},{"id":"438eee46.fe79b96b","type":"inject","z":"a5e0bedc.d77027d7","name":"Ask me!","topic":"","message":"","messageType":"date","repeat":"","crontab":"","once":false,"x":161,"y":226,"edges":[["360b06e8.6c4c0853"]]},{"id":"d13e1f82.a7e09a87","type":"spark","z":"a5e0bedc.d77027d7","name":"Spark Paragraph","content":"import org.apache.spark.sql._\nval sqlContext = new SapSQLContext( sc )\n\nsqlContext.sql(s\"\"\"REGISTER ALL TABLES USING com.sap.spark.vora OPTIONS (eagerLoad \"false\")\"\"\")\n\nsqlContext.sql(\"SHOW TABLES\").show()","userComments":[],"x":388,"y":228,"edges":[["7e33fb9b.f8fea9a1"]]},{"id":"7e33fb9b.f8fea9a1","type":"spark","z":"a5e0bedc.d77027d7","name":"Create Partitions and Series Tables","content":"sqlContext.sql(\"CREATE PARTITION FUNCTION PF5(X BIGINT) AS BLOCK(X) PARTITIONS 16 BLOCKSIZE 1000 USING com.sap.spark.engines\")\nsqlContext.sql(\"CREATE PARTITION SCHEME PS5 USING PF5 USING com.sap.spark.engines\")\nsqlContext.sql(\"\"\"CREATE GRAPH BRANDGRAPH PARTITION BY PS5(NODEID)\n     USING com.sap.spark.engines\n     OPTIONS (\n     files \"/user/spark/brandgraphv3.jsg\",\n     storagebackend \"hdfs\")\"\"\".stripMargin)","userComments":[],"x":447,"y":299,"edges":[["91c0a30e.69a5a181"]]},{"id":"dcfe2dd5.b965fe85","type":"create","z":"a5e0bedc.d77027d7","name":"Create Vora Playbook","host":"https://vora-playbooks-tdx26.app.quantiply.com","notebookName":"Vora Graph Model","userComments":[],"x":402,"y":124,"edges":[["444590d2.3005df97"]]},{"id":"86186a2e.8301f008","type":"inject","z":"a5e0bedc.d77027d7","name":"","topic":"","message":"","messageType":"date","repeat":"","crontab":"","once":false,"userComments":[],"x":274,"y":48,"edges":[["dcfe2dd5.b965fe85"]]},{"id":"91c0a30e.69a5a181","type":"spark","z":"a5e0bedc.d77027d7","name":"Find All Products","content":"sqlContext.sql(\"``SELECT A.DESCRIPTION FROM PRODUCT A USING GRAPH BRANDGRAPH`` USING com.sap.spark.engines\").show()","userComments":[],"x":381,"y":387,"edges":[["6cf68a9f.af4daaf8","1c6bbc2.5bfa644","93d9e755.9b60d8"]]},{"id":"6cf68a9f.af4daaf8","type":"viewport","z":"a5e0bedc.d77027d7","name":"","active":true,"console":"false","complete":"false","userComments":[],"x":224,"y":873,"edges":[]},{"id":"1c6bbc2.5bfa644","type":"table","z":"a5e0bedc.d77027d7","name":"","sequenceNum":1,"pulseType":"widget-table","description":"","enabled":true,"streamEnabled":false,"maxPoints":10,"userComments":[],"x":759,"y":477,"edges":[[]]},{"id":"93d9e755.9b60d8","type":"spark","z":"a5e0bedc.d77027d7","name":"Compute Degree for BrandGraph","content":"sqlContext.sql(\"``SELECT DEGREE(A) FROM CUSTOMER A USING GRAPH BRANDGRAPH`` USING com.sap.spark.engines\").show()","userComments":[],"x":432,"y":484,"edges":[["6cf68a9f.af4daaf8","23b2ad20.df0ac2"]]},{"id":"23b2ad20.df0ac2","type":"spark","z":"a5e0bedc.d77027d7","name":"Traverse Brandgraph","content":"sqlContext.sql(\"``SELECT A.BASKET_SIZE, A.CUSTOMER_LTV, A.BUYS.DESCRIPTION, A.BUYS.OWNEDBY.NAME FROM CUSTOMER A USING GRAPH BRANDGRAPH`` USING com.sap.spark.engines\").show()","userComments":[],"x":395,"y":581,"edges":[["6cf68a9f.af4daaf8","469f161e.c60fb8"]]},{"id":"469f161e.c60fb8","type":"spark","z":"a5e0bedc.d77027d7","name":"Spark Paragraph","content":"sqlContext.sql(\"``SELECT NODEID, NODETYPE, BASKET_SIZE, CUSTOMER_LTV FROM ANY USING GRAPH BRANDGRAPH`` USING com.sap.spark.engines\").show()","userComments":[],"x":461,"y":682,"edges":[["6cf68a9f.af4daaf8","822a3e34.ed67d"]]},{"id":"822a3e34.ed67d","type":"spark","z":"a5e0bedc.d77027d7","name":"Spark Paragraph","content":"sqlContext.sql(\"``SELECT A.BASKET_SIZE, CONNECTED_COMPONENT(STRONG A) AS SCC, CONNECTED_COMPONENT(WEAK a) AS WCC FROM CUSTOMER A USING GRAPH BRANDGRAPH`` USING com.sap.spark.engines\").show()","userComments":[],"x":573,"y":775,"edges":[["6cf68a9f.af4daaf8","3701b20c.72115e"]]},{"id":"3701b20c.72115e","type":"table","z":"a5e0bedc.d77027d7","name":"","sequenceNum":1,"pulseType":"widget-table","description":"","enabled":true,"streamEnabled":false,"maxPoints":10,"userComments":[],"x":622,"y":900,"edges":[[]]}]
